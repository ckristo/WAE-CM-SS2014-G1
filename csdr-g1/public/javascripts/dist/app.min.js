function initFileUpload(e){$("#donateForm").fileupload({url:e,sequentialUploads:!0,autoUpload:!0,dataType:"json",maxFileSize:5e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,previewCanvas:!1,added:function(){registerCancelButtonEventHandler()},done:function(e,n){var a=n.result.file;addFileInput(""+a.filename,""+a.randomFilename)}})}function registerCancelButtonEventHandler(){$("li.template-upload .btn-danger").unbind(),$("li.template-upload .btn-danger").click(function(e){e.preventDefault();var n=$(this).parents("li"),a=n.index(),i=$("input[name='numberOfFiles']").val();$('input[name^="file_'+a+'"]').remove();for(var t=a+1;i>t;t++)$('input[name="file_'+t+'-filename"]').attr("name","file_"+(t-1)+"-filename"),$('input[name="file_'+t+'-tmpname"]').attr("name","file_"+(t-1)+"-tmpname");return i>0&&i--,$("input[name='numberOfFiles']").val(i),n.fadeOut("fast"),n.remove(),!1})}function addFileInput(e,n){var a=$("input[name='numberOfFiles']").val();$("#donateForm").append('<input type="hidden" name="file_'+a+'-filename" value="'+e+'">'),$("#donateForm").append('<input type="hidden" name="file_'+a+'-tmpname" value="'+n+'">'),a++,$("input[name='numberOfFiles']").val(a)}